# Thomas Merkel <tm@core.io>
# vim:ft=sh

##
## xterm transparency workaround
##
#if [ -n "${XTERM_VERSION}" ]; then
#	transset-df 0.85 --id "${WINDOWID}" 2>&1 >/dev/null
#fi

##
## bash-completion
##
if [ -r /usr/local/share/bash-completion/bash_completion ]; then
	source /usr/local/share/bash-completion/bash_completion
fi

complete -C /opt/tools/bin/terraform terraform

##
## ruby virtual environment
##
alias rvm.load='[[ -s "${HOME}/.rvm/scripts/rvm" ]] && source "${HOME}/.rvm/scripts/rvm"'

##
## some local aliases
##
# PIM
alias todo="${TM_HOME}/.virtualenvs/pim/bin/todo"
alias cal="${TM_HOME}/.virtualenvs/pim/bin/khal"
alias ical="${TM_HOME}/.virtualenvs/pim/bin/ikhal"
alias addr="${TM_HOME}/.virtualenvs/pim/bin/khard"
alias vdirsyncer="${TM_HOME}/.virtualenvs/pim/bin/vdirsyncer"
# OTHER
alias leo="${TM_HOME}/.virtualenvs/leo/bin/leo"
alias translate="${TM_HOME}/.virtualenvs/leo/bin/leo"
# SYSTEM
alias fm='pcmanfm &'
alias open='xdg-open'
alias zzz='doas zzz'
function b() {
	case ${TM_OS} in
		freebsd)
			[[ ${1+x} ]] \
				&& doas sysctl hw.acpi.video.lcd0.brightness=${1} \
				|| doas sysctl hw.acpi.video.lcd0.brightness
			;;
		openbsd)
			[[ ${1+x} ]] \
				&& doas wsconsctl display.brightness=${1} \
				|| doas wsconsctl display.brightness
			;;
	esac
}

##
## git
##
export GITCHANGELOG_CONFIG_FILENAME=${TM_HOME}/.gitchangelog.rc

##
## dz tool
##
alias dz-search='dz list -c | grep -i'
alias zlogin='dz shell '

function alogin() {
	UUID=$(cat ~/.dz/vms.json | jq -r '.[][] | select(.alias=="'${1}'") | select(.state=="running") | .uuid')
	dz shell ${UUID}
}

##
## python virtual environment
##
WORKON_HOME="${TM_HOME}/.virtualenvs"
if [ -r /usr/local/bin/virtualenvwrapper_lazy.sh ]; then 
	source /usr/local/bin/virtualenvwrapper_lazy.sh
fi

##
## special admin scripts
##
[[ -e ~/.padmin/.adminrc ]] && . ~/.padmin/.adminrc
[[ -e ~/.padmin/admin/_std/srv_functions ]] && . ~/.padmin/admin/_std/srv_functions
alias csshA="csshX --ssh '/Users/tm/.padmin/admin/_std/pass.sh' --ssh_args '-rs' "


##
## Disable GTK warnings to stderr / stdout
##
export GTK_ENABLE_WARNINGS=0
